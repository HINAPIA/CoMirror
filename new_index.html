<!DOCTYPE html>
<html>
<head>
    <title>new_index</title>
    <meta charset="utf-8">
    <link href="css/new_weather.css" rel="stylesheet">
    <link href="css/sticker.css" rel="stylesheet">
    <link href="css/weather-icons.min.css" rel="stylesheet">
    <link href="css/new_clock.css" rel="stylesheet">
    <link href="record_module/css/recordbar.css" rel="stylesheet">
    <link href="record_module/css/new_recording_button.css" rel="stylesheet">
    <link href="css/new_index.css" rel="stylesheet">
    <link  href="css/new_callbook.css" rel="stylesheet">
    <script src="new_app.js"></script>
    <script>
        

        function setMemoDeleteBtn(e){
            let deleteBtns = document.getElementsByClassName("memoDeleteBtn");

            if (e.type == "dblclick" && deleteBtns.length != 0){
                    for (let i=0;i<deleteBtns.length;i++)
                        deleteBtns[i].style.visibility = "visible";
            }
            else if (e.type = "click" && deleteBtns.length != 0){
                for (let i=0;i<deleteBtns.length;i++)
                        deleteBtns[i].style.visibility = "hidden";
            }
        }
    </script>
</head>
<body>
    <article id="container">
        <div class="weather_ui">
            <div id="weather_icon"></div>
            <div id="temp"></div>
        </div>
        <div id="clock_ui">
            <div id="time"></div>
        </div>
        <div id="date_ui">
            <div id="date"></div>
        </div>
    </article>
    <!-- end of weather & clock & time -->
    <div id="bar_container">
        <button class="bar_button" id="bar_phone_button" onclick="barPhone()"><img class="bar_icon" src="./image/index/bar_phone.png"></button>
        <button class="bar_button" id="bar_callbook_button"><img class="bar_icon" src="./image/index/bar_callbook.png"></button>
        <button class="bar_button" id="bar_message_button" onclick="barMessage()"><img class="bar_icon" src="./image/index/bar_message2.png"></button>
        <button class="bar_button" id="bar_memmo_button" onclick="barMemo()"><img class="bar_icon" src="./image/index/bar_memo.png"></button>
    </div>
    <!-- end of menu bar -->
    <div id="message_memo_container" style="display: none;">
        <div id="radio_container">
            <input type="radio" name="option" class="option_radio" id="text" value="text" checked><label class="menu" for="text">Text</label>
            <input type="radio" name="option" class="option_radio" id="image" value="image"><label class="menu" for="image">Image</label>
            <input type="radio" name="option" class="option_radio" id="record" value="record"><label class="menu" for="record">Record</label>
        </div>
        <div id="content">
            <button class="option_button" id="write_button" onclick="showWrite()"><img class="option_icon" src="./image/index/write_icon.png"></button>
            <button class="option_button" id="back_button" onclick="showStore()" style="display: none;"><img class="option_icon" src="./image/index/back_icon.png"></button>
            <div id="select_content"></div>
        </div>
    </div>
    <!-- <div id="memo_ui" class="blur_effect">
        <div id="myMemo"></div><div id="sendMemo"></div>
    </div>

    <div id="contents">
        <div id="memo">
        </div>
        <div id="memoDiv" >
            <input id= "apply" type="button" value="전송">
            <input id = "cancle" type="button" value="닫기">
            <div id="user_list">
                <ul id="otherUserList">
                </ul>
            </div>
        </div>
    </div> -->
    <!-- <div id="sticker">
        <img id="stickerImg" ondblclick="setMemoDeleteBtn(event)" onclick="setMemoDeleteBtn(event)" src="memo_module/img/sticker.png">
        <img id="callImg" src="memo_module/img/call.png">
    </div> -->

    <div id="modal" class="modal-overlay">
        <div class="modal-window">
            <div class="title">
                <h3>연락처</h3>
            </div>
            <div class="close-area">✕</div>
            <div id="user-select">
                <div id="select-left">
                    <input type="radio" name="user" id="friend-list" checked><label for="friend-list">Mirror 친구 목록</label>
                    <div id="inside-selected" class="selected-div"></div>
                </div>
                <div id = "select-right">
                    <input type="radio" name = "user" id="find-friend"><label for="find-friend">Mirror 친구 추가</label>
                    <div id="outside-selected" class="selected-div"></div>
                </div>
            </div>
            <div id = "modal-contents">
                <ul id="otherUserList">
                </ul>
                <div id = "search-friend-div">
                    <input type="text" id="serach-input" placeholder="친구 Mirror ID">
                    <input type="button" id="search-btn" value="검색">
                    <p id="text" style="font-size:10px"></p>
                </div>
            </div>
        </div>
    </div>
</body>
<script src = "new_clock.js"></script>

<script src="new_callbook.js"></script>

<script src="record_module/new_record.js"></script>

<script>
    var message_click_cnt = 0; // 하단 bar 의 메시지 아이콘 몇 번 눌렀는지 확인
    var message_memo_container = document.getElementById("message_memo_container");

    var write_button = document.getElementById("write_button");
    var back_button = document.getElementById("back_button");
    var select_content = document.getElementById("select_content");

    // 하단 bar 의 메시지 아이콘 눌렀을 때
    function barMessage(){
        console.log("barMessage click");
        message_click_cnt++;
        if(message_click_cnt%2==1) message_memo_container.style.display = "block";
        else{
            message_memo_container.style.display = "none";
            message_click_cnt=0;
        }
    }

    function showRecordBar(){

    }

    function record(){
        var recordbars_div = document.createElement("div");
        recordbars_div.setAttribute("id", "recordbars_div");
        recordbars_div.setAttribute("style","display: none;");

        var bars = document.createElement("div");
        bars.setAttribute("id", "bars");
        
        for(let i=0; i<10; i++){
            var bar = document.createElement("div");
            bar.setAttribute("class", "bar");
            bars.appendChild(bar);
        }
        recordbars_div.appendChild(bars);


        var record_button_container = document.createElement("div");
        record_button_container.setAttribute("class", "record_button_container");

        var record_checkbox = document.createElement("input");
        record_checkbox.setAttribute("type", "checkbox");
        record_checkbox.setAttribute("id","record_button");
        record_checkbox.setAttribute("onClick", "showRecordBar()");
        
        var record_label = document.createElement("label");
        record_label.setAttribute("for","record_button");
        record_label.setAttribute("id","record_button_label");
        
        var record_time = document.createElement("div");
        record_time.setAttribute("class","record_time");

        var record_hm = document.createElement("div");
        record_hm.setAttribute("class","h_m");
        var record_sms = document.createElement("div");
        record_sms.setAttribute("class","s_ms");

        record_time.appendChild(record_hm);
        record_time.appendChild(record_sms);

        record_button_container.appendChild(record_checkbox);
        record_button_container.appendChild(record_label);
        record_button_container.appendChild(record_time);

        var player = documnet.createElement("audio");
        player.setAttribute("id","player");
        player.setAttribute("controls");
        player.setAttribute("style", "display: none;");
        
        select_content.appendChild(recordbars_div);
        select_content.appendChild(record_button_container);

        // <div class="record_button_container">
        //     <input type="checkbox" id="record_button"/>
        //     <label for="record_button" id="record_button_label"></label>
        //     <div class="record_time">
        //         <div class="h_m"></div > 
        //         <div class="s_ms"></div>
        //     </div>
        // </div>
    }

    function showWrite(){
        write_button.style.display = "none";
        back_button.style.display = "block";

        // 라디오 버튼 체크 확인
        var radio = document.getElementsByName("option");
        var sel_type = null;
        for(var i=0;i<radio.length;i++){
            if(radio[i].checked == true) sel_type = radio[i].value;
        }

        if(sel_type == "text"){
            //
        }
        else if(sel_type == "image"){
            //
        }
        else { // sel_type == "record"
            record();
        }
    }

    function showStore(){
        write_button.style.display = "block";
        back_button.style.display = "none";

        // 라디오 버튼 체크 확인
        var radio = document.getElementsByName("option");
        var sel_type = null;
        for(var i=0;i<radio.length;i++){
            if(radio[i].checked == true) sel_type = radio[i].value;
        }

        if(sel_type == "text"){
            //
        }
        else if(sel_type == "image"){
            //
        }
        else { // sel_type == "record"
            // record_store();
        }
    }
</script>
</html>